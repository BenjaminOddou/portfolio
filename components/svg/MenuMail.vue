<script setup lang="ts">
import gsap from 'gsap'
let tl: gsap.core.Timeline
const isHover = () => tl.play()
const isNotHover = () => tl.reverse()
onMounted(() => {
  tl = gsap.timeline().pause()
  const posmiddleEnveloppe = 'M19.9175 24.0009L34.6675 24.01L49.4175 24.0009C49.8031 23.9914 50.1866 24.0604 50.5447 24.2037C50.9029 24.3469 51.2282 24.5614 51.5009 24.8341C51.7736 25.1069 51.9881 25.4322 52.1314 25.7903C52.2746 26.1484 52.3436 26.5319 52.3342 26.9175V45.7509C52.3436 46.1364 52.2746 46.5199 52.1314 46.8781C51.9881 47.2362 51.7736 47.5615 51.5009 47.8342C51.2282 48.107 50.9029 48.3215 50.5447 48.4647C50.1866 48.6079 49.8031 48.6769 49.4175 48.6675H19.9175C19.5319 48.6769 19.1484 48.6079 18.7903 48.4647C18.4322 48.3215 18.1069 48.107 17.8341 47.8342C17.5614 47.5615 17.3469 47.2362 17.2037 46.8781C17.0604 46.5199 16.9914 46.1364 17.0009 45.7509V26.9175C16.9914 26.5319 17.0604 26.1484 17.2037 25.7903C17.3469 25.4322 17.5614 25.1069 17.8341 24.8341C18.1069 24.5614 18.4322 24.3469 18.7903 24.2037C19.1484 24.0604 19.5319 23.9914 19.9175 24.0009ZM20.3342 27.3342L34.6675 27.32L49.0009 27.3342L34.6675 36.2509L20.3342 27.3342ZM20.3342 45.3342H49.0009V31.35L34.6675 40L20.3342 31.35V45.3342Z'
  const posendEnveloppe = 'M19.9175 24.0009L34.6675 15.0009L49.5 24.0009C49.8856 24.2 50.1866 24.35 50.5447 24.55C50.9029 24.75 51 24.85 51.5009 25.15C51.7736 25.35 51.95 25.4322 52.17 25.7903C52.3132 26.1484 52.3436 26.5319 52.3342 26.9175V45.7509C52.3436 46.1364 52.2746 46.5199 52.1314 46.8781C51.9881 47.2362 51.7736 47.5615 51.5009 47.8342C51.2282 48.107 50.9029 48.3215 50.5447 48.4647C50.1866 48.6079 49.8031 48.6769 49.4175 48.6675H19.9175C19.5319 48.6769 19.1484 48.6079 18.7903 48.4647C18.4322 48.3215 18.1069 48.107 17.8341 47.8342C17.5614 47.5615 17.3469 47.2362 17.2037 46.8781C17.0604 46.5199 16.9914 46.1364 17.0009 45.7509V26.9175C17.03 26.5319 17.0067 26.3581 17.15 26C17.2932 25.6419 17.6 25.3728 18 25.1C18.4 24.85 18.4322 24.8 18.7903 24.6C19.1484 24.4 19.5319 24.2 19.9175 24.0009ZM20.3342 27.3342L34.6675 18.4L49.0009 27.3342L34.6675 36.2509L20.3342 27.3342ZM20.3342 45.3342H49.0009V31.35L34.6675 40L20.3342 31.35V45.3342Z'
  const posmiddle1Ouverture = 'M 20.35 27.35 L 34.68 36.27 L 49 27.35 V 31.35 L 34.68 40 L 20.35 31.35 V 27.35 Z'
  const posmiddle2Ouverture = 'M 20.35 24 L 34.68 24 L 49 24 V 27.33 L 34.68 27.33 L 20.35 27.33 V 24 Z'
  const posendOuverture = 'M 20.35 24 L 34.68 15 L 49 24 V 27.33 L 34.68 18.33 L 20.35 27.33 V 24 Z'
  const posendBackdoc = 'M 27.35 31.7 V 20.35 H 42 V 31.7 H 27.35 Z'
  const posendContour = 'M 24 31.7 V 17 H 45.35 V 31.7 H 42 V 20.35 H 27.35 V 31.7 H 24'
  tl
    .to(
      '#enveloppe',
      {
        duration: 0.15,
        attr: {
          d: posmiddleEnveloppe,
        },
        ease: 'none',
      },
      '<',
    )
    .to(
      '#ouverture',
      {
        duration: 0.15,
        attr: {
          d: posmiddle1Ouverture,
        },
        ease: 'none',
      },
      '<',
    )
    .to(
      '#ouverture',
      {
        duration: 0.15,
        attr: {
          d: posmiddle2Ouverture,
        },
        ease: 'none',
      },
      '<0.15',
    )
    .to(
      '#enveloppe',
      {
        duration: 0.225,
        attr: {
          d: posendEnveloppe,
        },
        ease: 'none',
      },
      '<0.15',
    )
    .to(
      '#ouverture',
      {
        duration: 0.225,
        attr: {
          d: posendOuverture,
        },
        ease: 'none',
      },
      '<',
    )
    .to(
      '#backDoc',
      {
        duration: 0.2,
        attr: {
          d: posendBackdoc,
        },
        ease: 'back.out(4)',
      },
      '<0.1',
    )
    .to(
      '#contourDoc',
      {
        duration: 0.2,
        attr: {
          d: posendContour,
        },
        ease: 'back.out(4)',
      },
      '<',
    )
    .to(
      '#textMail',
      {
        duration: 0.6,
        opacity: 1,
        ease: 'sine.inOut',
      },
      0,
    )
})
</script>

<template>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 70 70"
    class="fill-jet dark:fill-white"
    @mouseenter="isHover"
    @mouseleave="isNotHover"
  >
    <path
      id="enveloppe"
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M19.9 21L34.7 21L49.4 21C49.8 21 50.2 21 50.5 21.2C50.9 21.3 51.2 21.6 51.5 21.8C51.8 22.1 51.9881 22.4322 52.1314 22.7903C52.2746 23.1484 52.3436 23.5319 52.3342 23.9175V45.7509C52.3436 46.1364 52.2746 46.5199 52.1314 46.8781C51.9881 47.2362 51.7736 47.5615 51.5009 47.8342C51.2282 48.107 50.9029 48.3215 50.5447 48.4647C50.1866 48.6079 49.8031 48.6769 49.4175 48.6675H19.9175C19.5319 48.6769 19.1484 48.6079 18.7903 48.4647C18.4322 48.3215 18.1069 48.107 17.8341 47.8342C17.5614 47.5615 17.3469 47.2362 17.2037 46.8781C17.0604 46.5199 16.9914 46.1364 17.0009 45.7509V23.9175C16.9914 23.5319 17.0604 23.1484 17.2037 22.7903C17.3469 22.4322 17.5614 22.1069 17.8341 21.8341C18.1069 21.5614 18.4322 21.3469 18.7903 21.2037C19.1484 21.0604 19.5319 20.9914 19.9175 21.0009ZM20.3342 24.3342L34.6675 24.32L49.0009 24.3342L34.6675 33.2509L20.3342 24.3342ZM20.3342 45.3342H49.0009V28.35L34.6675 37L20.3342 28.35V45.3342Z"
    />
    <path
      id="ouverture"
      d="M 20.35 24.35 L 34.68 33.27 L 49 24.35 V 28.35 L 34.68 37 L 20.35 28.35 V 24.35 Z"
    />
    <path
      id="backDoc"
      class="fill-white stroke-transparent transition-fill duration-500 ease-[ease] dark:fill-jet"
      d="M 27.35 31.7 V 31.7 H 42 V 31.7 H 27.35 Z"
    />
    <path
      id="contourDoc"
      d="M 24 31.7 V 31.7 H 45.35 V 31.7 H 42 V 31.7 H 27.35 V 31.7 H 24"
    />
    <path id="textMail" class="spin opacity-0" d="m25.9 5.9 3.2-.6-.4-2-3.8.7-.3-1.6 5.8-1L32 9.8l-5.8 1-.3-1.5 3.7-.7-.3-1.8-3.2.6-.2-1.5Zm-3.6 4.5-.4-.6c-.1.7-.5 1.3-1.2 1.7-.6.4-1.3.4-1.8 0 0 .7-.5 1.3-1.2 1.7-1 .7-2 .3-2.9-1l-2-3.6 1.7-1 2 3.5.5.5h.6c.4-.3.5-.6.5-1l-2.2-3.8 1.7-1 2 3.5.5.5.6-.1c.4-.2.5-.5.5-.9L19 5l1.7-1 3.2 5.5-1.6 1Zm-14.4 4 .6.2c-.2-.5 0-1 .4-1.6.4-.4.9-.7 1.4-.8.5 0 1 0 1.5.4s.7 1 .7 1.6c0 .6-.4 1.3-1 2l-.4.5.2.2c.5.4.9.4 1.2 0 .3-.4.3-.7-.1-1l1.3-1.5c.4.4.6.9.6 1.5 0 .7-.3 1.3-.8 2s-1.1 1-1.7 1a2 2 0 0 1-1.7-.5l-2.2-1.7c-.4-.4-.8-.6-1.2-.7l1.2-1.6Zm1.8-.1a1 1 0 0 0-.3.6 1 1 0 0 0 0 .5l.9.6.3-.4c.5-.6.4-1 0-1.4a.6.6 0 0 0-.5-.2.7.7 0 0 0-.4.3Zm-5.9 7.3.8-1.8 5.8 2.7-.8 1.8-5.8-2.7Zm8.1 1.4a.9.9 0 0 1 .5.6c.1.3 0 .6 0 .8l-.6.7a.9.9 0 0 1-.8 0 .9.9 0 0 1-.5-.6l.1-.9c.1-.2.3-.5.6-.6h.7ZM1.7 28.8l.4-2 8.8 1.9-.4 2-8.8-1.9ZM4 41.5v.8a.9.9 0 0 1-.7.5 1 1 0 0 1-.8-.1 1.1 1.1 0 0 1-.4-.7v-1a1 1 0 0 1 .7-.4 1 1 0 0 1 .8.1c.2.2.4.4.4.7Zm9.7 14.1-2-2.5-1.7 1.3 2.5 3-1.3 1-3.7-4.6 6.6-5.4 3.7 4.6-1.2 1-2.4-3-1.4 1.2 2 2.5-1.1 1Zm5.6 1-.3.7c.7-.3 1.3-.2 2 .1.7.5 1 1 .9 1.7.7-.3 1.4-.3 2 .1 1.2.7 1.4 1.7.6 3l-2.1 3.6-1.7-1 2-3.5.3-.6c0-.2-.2-.4-.4-.5a1 1 0 0 0-1 0h-.1L19.3 64l-1.7-1 2-3.4.3-.7c0-.2-.2-.3-.4-.5a1 1 0 0 0-1 0l-2.3 3.8-1.7-1 3.2-5.5 1.6 1Zm10.5 10.6a2.2 2.2 0 0 1 0-.5c-.5.3-1 .5-1.7.3-.6 0-1-.3-1.4-.8a1.7 1.7 0 0 1-.4-1.4c.2-.7.5-1.2 1-1.4.6-.3 1.4-.3 2.3-.1h.6l.1-.2c.1-.6 0-1-.6-1-.4-.1-.7 0-.8.5l-2-.4c.2-.6.5-1 1.1-1.3.6-.3 1.3-.3 2-.2.9.2 1.5.5 1.9 1 .3.4.5 1 .4 1.7l-.6 2.8v1.4l-2-.4Zm-1-1.4h.6a1 1 0 0 0 .5-.4l.1-1h-.5c-.7-.2-1 0-1.2.6a.6.6 0 0 0 0 .5l.5.3Zm9.3 1.6-2 .1-.5-6.3 2-.2.5 6.4Zm-2.7-7.8a.9.9 0 0 1 .3-.7c.1-.2.4-.4.7-.4.4 0 .6 0 .8.2a.9.9 0 0 1 .4.7.9.9 0 0 1-.3.7c-.1.2-.4.3-.7.3-.4 0-.6 0-.8-.2a.9.9 0 0 1-.4-.6Zm10 6.1-2 .6-2.6-8.6 1.9-.6 2.7 8.6Zm10-8.1c.2-.2.5-.3.8-.3.2 0 .5 0 .7.3a1 1 0 0 1 .2.7 1.1 1.1 0 0 1-.4.7 1 1 0 0 1-.8.4 1 1 0 0 1-.7-.4 1 1 0 0 1-.2-.7c0-.3.2-.5.4-.7Zm7.7-15.3-1.2 3 1.9.8 1.4-3.6 1.5.6-2.2 5.5-8-3.2 2.3-5.5 1.4.6-1.4 3.6 1.7.6 1.2-3 1.4.6Zm-1.9-5.4h.7c-.5-.5-.8-1.1-.8-1.9 0-.8.4-1.3 1-1.6-.6-.4-.9-1-.8-1.9 0-1.3.8-1.9 2.4-1.9l4 .2v2l-4-.2-.7.1-.2.6c0 .4.1.7.5 1h4.4l-.1 2h-4.7c-.2.1-.3.3-.3.6 0 .4.2.7.5 1h4.4v2l-6.4-.2.1-1.8Zm4.3-14.3-.5.3c.5.2 1 .6 1.1 1.3.2.5.2 1 0 1.6-.2.5-.6.8-1.1 1-.7.2-1.2.1-1.7-.2s-1-1-1.2-2l-.2-.6-.3.1c-.6.2-.8.6-.6 1 .1.5.4.6.8.5l.7 1.9c-.6.2-1.2 0-1.7-.3a3.4 3.4 0 0 1-1.2-3.7c.2-.6.7-1 1.3-1.2l2.7-.9c.5-.2 1-.4 1.2-.7l.7 1.9Zm-.9 1.5a1 1 0 0 0-.3-.5 1 1 0 0 0-.5-.2l-1 .3.3.6c.2.6.6.8 1.2.6a.6.6 0 0 0 .3-.3.7.7 0 0 0 0-.5Zm-3-8.9 1 1.7-5.3 3.5-1-1.7 5.3-3.5ZM56 21.4a.9.9 0 0 1-.7 0c-.3 0-.5-.2-.7-.4l-.2-.8a.9.9 0 0 1 .4-.7.9.9 0 0 1 .8 0c.2 0 .5.2.6.4.2.3.3.6.2.8a.9.9 0 0 1-.4.7Zm.6-11.7L58 11l-6.2 6.4-1.4-1.3 6.2-6.5Zm-12-4.9a1.1 1.1 0 0 1-.6-.5.9.9 0 0 1 0-.8 1 1 0 0 1 .5-.5c.2-.1.5-.1.8 0 .3 0 .5.2.6.5a1 1 0 0 1 0 .8 1 1 0 0 1-.4.5h-.9Z" />
  </svg>
</template>
